{"version":3,"sources":["script.js"],"names":["mountNode","document","querySelector","auth","btoa","SearchBar","evt","console","log","keyCode","setState","request","target","value","doSearch","state","keyUpHappened","React","Component","GithubRepos","props","searchRepos","query","page","pageNum","maxPage","$","ajax","type","url","data","q","dataType","async","headers","done","repoData","apiResult","Math","ceil","total_count","fail","window","alert","searchResults","pageButtons","undefined","items","map","repo","id","html_url","name","owner","login","backButton","nextButton","AppComponent","ReactDOM","render"],"mappings":"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","file":"script.js","sourcesContent":["(function() {\n\n  //data should flow ONE WAY\n  //or seperate function to object outside components and use as argument\n\n  var mountNode = document.querySelector('#react-root');\n  var auth = btoa(\"4d892accbfd6b61cb0118fe2a5ce0baeebe5dad7\");\n\n  //placeholder\n\n  class SearchBar extends React.Component {\n\n    constructor(){\n      super();\n\n    }\n\n    keyUpHappened(evt){\n      console.log(evt.keyCode);\n      if (evt.keyCode === 13){\n        // console.log(evt.target.value);\n        // GithubRepos.searchRepos(evt.target.value);\n        this.setState({\n          request:evt.target.value\n        })\n      }\n    }\n\n\n\n    render(){\n      var doSearch;\n\n      if (this.state !== null){\n        doSearch = <GithubRepos query={this.state.request} page={1}/>;\n        console.log('maxPage')\n\n      }\n\n      return (<div>\n        <div className=\"search-box\">\n          <input className = \"repo-input\"\n          placeholder=\"Type a repo name and hit Enter\"\n          onKeyUp={(evt) => {this.keyUpHappened(evt)}}/>\n        </div>\n          {doSearch}\n      </div>);\n    }\n\n  }\n\n\n  class GithubRepos extends React.Component {\n\n    constructor(){\n      super();\n    }\n\n    componentWillMount(){\n      console.log('component mounted',this.props);\n      // this.searchRepos(this.state.query);\n      // this.setState({\n      //   query:this.props.query,\n      //   pageNum:this.props.page\n      // })\n\n    }\n    componentDidMount(){\n\n      this.searchRepos(this.props.query,this.props.page);\n      this.setState({\n        query:this.props.query,\n        pageNum:this.props.page\n      })\n    }\n\n    nextButton(){\n      var page = this.state.pageNum;\n\n\n      if (page <= this.state.maxPage){\n        page ++;\n\n        this.setState({\n          pageNum:page\n        })\n\n        this.searchRepos(this.state.query,this.state.pageNum);\n\n      }\n\n    }\n\n    backButton(){\n      var page = this.state.pageNum;\n\n      if (page > 0) {\n\n        page --;\n\n        this.setState({\n          pageNum:page\n        })\n\n        this.searchRepos(this.state.query,this.state.pageNum);\n\n      }\n\n    }\n\n    searchRepos(query,page){\n\n      $.ajax({\n        type: 'GET',\n        url: \"https://api.github.com/search/repositories\",\n        data:{q:query, page:page},\n        dataType: 'JSON',\n        async:true,\n        headers:{\n          \"Authorization\": \"Basic \" + auth\n        },\n      })\n      .done((repoData) => {\n        //test\n        console.log(\"recieved data ==>\", repoData);\n\n        this.setState({\n          apiResult:repoData,\n          maxPage:Math.ceil(repoData.total_count/30)+1\n        })\n\n      })\n      .fail(() => {\n        console.log(\"API Call Failure\");\n        window.alert('API FAILURE');\n      });\n\n    }\n\n    render(){\n      // console.log(\"render sees page as\",this.state.pageNum);\n      // console.log(\"render bar sees max-page as\",this.state.maxPage);\n      var searchResults;\n      var pageButtons;\n\n      if (this.state !== null && this.state.apiResult !== undefined && this.state.pageNum !== undefined){\n        searchResults =\n         <ul className='results'>\n          {this.state.apiResult.items.map((repo) => {return (\n            <li key={repo.id}>\n              <div className = 'repo-listing'>\n                <a href={repo.html_url}>{repo.name}</a>\n                <div className='repo-owner'>\n                  <a href={repo.owner.html_url}>{repo.owner.login}</a>\n                </div>\n              </div>\n            </li>\n          )})}\n        </ul>;\n\n        if (this.state.maxPage > 1){\n          console.log(\"button bar sees page as\",this.state.pageNum);\n          console.log(\"button bar sees max-page as\",this.state.maxPage);\n          pageButtons =  <div className=\"pages\">\n            <span className =\"back\"\n            onClick={()=>{this.backButton();}}>Back</span>\n            <span className=\"page-num\">{this.state.pageNum}/{this.state.maxPage}</span>\n            <span className =\"next\"\n            onClick={()=>{this.nextButton();}}>Next</span>\n          </div>\n        }\n\n      }\n\n      return <div>{pageButtons}<div className=\"repos-list\"> {searchResults}  </div></div>\n    }\n  }\n\n  class AppComponent extends React.Component {\n    render() {\n      return (<div>React works!\n        <SearchBar />\n      </div>);\n    }\n  }\n\n  ReactDOM.render(<AppComponent />, mountNode);\n\n\n}());\n"]}