{"version":3,"sources":["script.js"],"names":["mountNode","document","querySelector","auth","btoa","GithubRepos","state","page","evt","console","log","keyCode","setState","query","target","value","searchRepos","newPage","maxPage","$","ajax","type","url","data","q","dataType","async","headers","done","repoData","apiResult","Math","ceil","total_count","fail","window","alert","searchBox","searchResults","pageButtons","keyUpHappened","undefined","items","map","repo","id","html_url","name","owner","login","backButton","nextButton","React","Component","AppComponent","ReactDOM","render"],"mappings":"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","file":"script.js","sourcesContent":["(function() {\n\n  //data should flow ONE WAY\n  //or seperate function to object outside components and use as argument\n\n  var mountNode = document.querySelector('#react-root');\n  var auth = btoa(\"4d892accbfd6b61cb0118fe2a5ce0baeebe5dad7\");\n\n\n  class GithubRepos extends React.Component {\n\n    constructor(){\n      super();\n\n      this.state=({\n        page:1\n      })\n    }\n\n    componentWillMount(){\n\n    }\n    componentDidMount(){\n\n    }\n\n    keyUpHappened(evt){\n      console.log(evt.keyCode);\n      if (evt.keyCode === 13){\n        // console.log(evt.target.value);\n        // GithubRepos.searchRepos(evt.target.value);\n        this.setState({\n          query:evt.target.value\n        })\n        this.searchRepos(evt.target.value);\n      }\n    }\n\n    nextButton(){\n      var newPage = this.state.page;\n\n\n      if (newPage < this.state.maxPage){\n        newPage ++;\n\n        this.setState({\n          page:newPage\n        })\n\n        this.searchRepos(this.state.query,this.state.page);\n\n      }\n\n    }\n\n    backButton(){\n      var newPage = this.state.page;\n\n      if (newPage > 0) {\n\n        newPage --;\n\n        this.setState({\n          page:newPage\n        })\n\n        this.searchRepos(this.state.query,this.state.page);\n\n      }\n\n    }\n\n    searchRepos(query,page){\n\n      $.ajax({\n        type: 'GET',\n        url: \"https://api.github.com/search/repositories\",\n        data:{q:query, page:page},\n        dataType: 'JSON',\n        async:true,\n        headers:{\n          \"Authorization\": \"Basic \" + auth\n        },\n      })\n      .done((repoData) => {\n        //test\n        console.log(\"recieved data ==>\", repoData);\n\n        this.setState({\n          apiResult:repoData,\n          maxPage:Math.ceil(repoData.total_count/30)\n        })\n\n      })\n      .fail(() => {\n        console.log(\"API Call Failure\");\n        window.alert('API FAILURE');\n      });\n\n    }\n\n    render(){\n      // console.log(\"render sees page as\",this.state.pageNum);\n      // console.log(\"render bar sees max-page as\",this.state.maxPage);\n      var searchBox;\n      var searchResults;\n      var pageButtons;\n\n      searchBox = <div>\n        <div className=\"search-box\">\n          <input className = \"repo-input\"\n          placeholder=\"Type a repo name and hit Enter\"\n          onKeyUp={(evt) => {this.keyUpHappened(evt)}}/>\n        </div>\n\n      </div>;\n\n      if (this.state !== null && this.state.apiResult !== undefined && this.state.page !== undefined){\n        searchResults =\n         <ul className='results'>\n          {this.state.apiResult.items.map((repo) => {return (\n            <li key={repo.id}>\n              <div className = 'repo-listing'>\n                <a href={repo.html_url}>{repo.name}</a>\n                <div className='repo-owner'>\n                  <a href={repo.owner.html_url}>{repo.owner.login}</a>\n                </div>\n              </div>\n            </li>\n          )})}\n        </ul>;\n\n        if (this.state.maxPage > 1){\n          console.log(\"button bar sees page as\",this.state.page);\n          console.log(\"button bar sees max-page as\",this.state.maxPage);\n          pageButtons =  <div className=\"pages\">\n            <span className =\"back\"\n            onClick={()=>{this.backButton();}}>Back</span>\n            <span className=\"page-num\">{this.state.page}/{this.state.maxPage}</span>\n            <span className =\"next\"\n            onClick={()=>{this.nextButton();}}>Next</span>\n          </div>\n        }\n\n      }\n\n      return <div>{searchBox}{pageButtons}<div className=\"repos-list\"> {searchResults}  </div></div>\n    }\n  }\n\n  class AppComponent extends React.Component {\n    render() {\n      return (<div>React works!\n        <GithubRepos />\n      </div>);\n    }\n  }\n\n  ReactDOM.render(<AppComponent />, mountNode);\n\n\n}());\n"]}