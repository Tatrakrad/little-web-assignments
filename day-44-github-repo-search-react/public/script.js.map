{"version":3,"sources":["script.js"],"names":["mountNode","document","querySelector","auth","btoa","GithubRepos","evt","console","log","keyCode","setState","query","target","value","page","searchRepos","newPage","state","maxPage","$","ajax","type","url","data","q","dataType","async","headers","done","repoData","apiResult","Math","ceil","total_count","fail","window","alert","searchBox","pageButtons","showResults","keyUpHappened","undefined","backButton","nextButton","React","Component","Results","results","props","returned","items","map","repo","id","html_url","name","owner","login","AppComponent","ReactDOM","render"],"mappings":"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","file":"script.js","sourcesContent":["(function() {\n\n  //data should flow ONE WAY\n  //or seperate function to object outside components and use as argument\n\n  var mountNode = document.querySelector('#react-root');\n  var auth = btoa(\"4d892accbfd6b61cb0118fe2a5ce0baeebe5dad7\");\n\n\n  class GithubRepos extends React.Component {\n\n    constructor(){\n      super();\n    }\n\n    componentWillMount(){\n\n    }\n    componentDidMount(){\n\n    }\n\n    keyUpHappened(evt){\n      console.log(evt.keyCode);\n      if (evt.keyCode === 13){\n        // console.log(evt.target.value);\n        // GithubRepos.searchRepos(evt.target.value);\n        this.setState({\n          query:evt.target.value,\n          page:1\n        })\n        this.searchRepos(evt.target.value,1);\n      }\n    }\n\n    nextButton(){\n      var newPage = this.state.page;\n\n\n      if (newPage < this.state.maxPage){\n        newPage ++;\n\n        this.setState({\n          page:newPage\n        })\n\n        this.searchRepos(this.state.query,this.state.page);\n\n      }\n\n    }\n\n    backButton(){\n      var newPage = this.state.page;\n\n      if (newPage > 1) {\n\n        newPage --;\n\n        this.setState({\n          page:newPage\n        })\n\n        this.searchRepos(this.state.query,this.state.page);\n\n      }\n\n    }\n\n    searchRepos(query,page){\n\n      $.ajax({\n        type: 'GET',\n        url: \"https://api.github.com/search/repositories\",\n        data:{q:query, page:page},\n        dataType: 'JSON',\n        async:true,\n        headers:{\n          \"Authorization\": \"Basic \" + auth\n        },\n      })\n      .done((repoData) => {\n        //test\n        console.log(\"recieved data ==>\", repoData);\n\n        this.setState({\n          apiResult:repoData,\n          maxPage:Math.ceil(repoData.total_count/30)\n        })\n\n      })\n      .fail(() => {\n        console.log(\"API Call Failure\");\n        window.alert('API FAILURE');\n      });\n\n    }\n\n    render(){\n      // console.log(\"render sees page as\",this.state.pageNum);\n      // console.log(\"render bar sees max-page as\",this.state.maxPage);\n      var searchBox;\n      var pageButtons;\n      var showResults;\n\n      searchBox = <div>\n        <div className=\"search-box\">\n          <input className = \"repo-input\"\n          placeholder=\"Type a repo name and hit Enter\"\n          onKeyUp={(evt) => {this.keyUpHappened(evt)}}/>\n        </div>\n\n      </div>;\n\n      if (this.state !== null && this.state.apiResult !== undefined && this.state.page !== undefined){\n\n        showResults = <div className=\"repos-list\"> <Results returned={this.state.apiResult}/></div>\n\n        if (this.state.maxPage > 1){\n          console.log(\"button bar sees page as\",this.state.page);\n          console.log(\"button bar sees max-page as\",this.state.maxPage);\n          pageButtons =  <div className=\"pages\">\n            <span className =\"back\"\n            onClick={()=>{this.backButton();}}>Back</span>\n            <span className=\"page-num\">{this.state.page}/{this.state.maxPage}</span>\n            <span className =\"next\"\n            onClick={()=>{this.nextButton();}}>Next</span>\n          </div>\n        }\n\n      }\n\n      return <div>{searchBox}{pageButtons}{showResults}</div>\n    }\n  }\n\n  class Results extends React.Component {\n\n    constructor(){\n      super();\n    }\n\n    render(){\n      var results = <ul className='results'>\n       {this.props.returned.items.map((repo) => {return (\n         <li key={repo.id}>\n           <div className = 'repo-listing'>\n             <a href={repo.html_url}>{repo.name}</a>\n             <div className='repo-owner'>\n               <a href={repo.owner.html_url}>{repo.owner.login}</a>\n             </div>\n           </div>\n         </li>\n       )})}\n     </ul>;\n\n         return (<div>{results}</div>)\n    }\n\n\n  }\n\n  class AppComponent extends React.Component {\n    render() {\n      return (<div>React works!\n        <GithubRepos />\n      </div>);\n    }\n  }\n\n  ReactDOM.render(<AppComponent />, mountNode);\n\n\n}());\n"]}