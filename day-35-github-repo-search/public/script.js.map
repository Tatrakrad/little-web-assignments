{"version":3,"sources":["../client/js/script.js"],"names":["searchForm","$","searchRepos","val","searchButton","backButton","nextButton","pageDisplay","pageNum","maxPage","resultsDiv","reposList","githubReposTemplate","auth","btoa","click","evt","preventDefault","length","searchGithubRepos","keyup","which","reponame","console","log","html","promise","ajax","type","url","data","q","page","dataType","async","headers","done","Math","ceil","total_count","removeClass","renderPage","addClass","fail","alert","content","hasClass","templateContent","outputRepos","Mustache","render","append"],"mappings":"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","file":"script.js","sourcesContent":["(function() {\n\n\n    //select inputs\n    var searchForm = $( '.repo-input' );\n    var searchRepos = $( '.repo-input' ).val();\n    var searchButton = $('.search-button');\n\n    //paginate\n    var backButton = $('.back');\n    var nextButton = $('.next');\n    var pageDisplay = $('.page-num');\n    var pageNum = 1;\n    var maxPage;\n\n    //select outputs\n    var resultsDiv = $( '.results' );\n    var reposList = $( \".repos-list\" );\n    var githubReposTemplate = $( \".github-repos-template\" );\n\n    //the cure for a rate limit 403 error?\n    var auth = btoa(\"4d892accbfd6b61cb0118fe2a5ce0baeebe5dad7\");\n\n\n    searchButton.click = (evt) => {\n\n      searchRepos = $( '.repo-input' ).val();\n      // console.log(evt,evt.target);\n      evt.preventDefault();\n      // console.log(searchRepos);\n      pageNum = 1;\n      if(searchRepos.length > 0){\n        searchGithubRepos(searchRepos,pageNum);\n      }\n\n    };\n\n    searchForm.keyup = (evt) => {\n      searchRepos = $( '.repo-input' ).val();\n      pageNum = 1;\n      if (evt.which === 13 && searchRepos.length > 0){\n        searchGithubRepos(searchRepos,pageNum);\n      }\n    };\n\n    nextButton.click = () => {\n      // searchRepos = $( '.repo-input' ).val();\n      if (pageNum < maxPage){\n        pageNum++;\n        searchGithubRepos(searchRepos,pageNum);\n      }else{\n        return;\n      }\n\n    };\n\n    backButton.click = () => {\n      // searchRepos = $( '.repo-input' ).val();\n      if (pageNum > 1){\n        pageNum--;\n        searchGithubRepos(searchRepos,pageNum);\n      }else{\n        return;\n      }\n\n    };\n\n\n    //api Call\n    //api.github.com/users/\n    //api.github.com/search/users\n    //api.github.com/search/repos\n\n    function searchGithubRepos(reponame,pageNum){\n\n      console.log(reponame);\n      console.log(\"clearing output\");\n      reposList.html(\"\");\n\n      var promise = $.ajax({\n        type: 'GET',\n        url: \"https://api.github.com/search/repositories\",\n        data:{q:reponame, page:pageNum},\n        dataType: 'JSON',\n        async:true,\n        headers: {\n         \"Authorization\": \"Basic \" + auth\n       },\n      });\n\n      promise.done = (data) => {\n        maxPage = Math.ceil(data.total_count/30);\n        $('.pages').removeClass(\"hidden\");\n        //test\n        console.log(\"recieved data, =||= ::\",data);\n        console.log(\"maxpage \",maxPage)\n        // resultsDiv.append(JSON.stringify(data));\n        //button check used to be here\n        if(maxPage > 0){\n          pageDisplay.html(pageNum + \" / \" + maxPage);\n          renderPage(data);\n        }else{\n          reposList.addClass('hidden');\n          pageDisplay.html(\"No Results\");\n        }\n\n      };\n\n      promise.fail = () =>{\n        console.log(\"Nothing on GITHUB today\");\n        alert(\"GITHUB NOT DOING IT FOR YOU\") ;\n      };\n\n    }\n\n\n    function renderPage(content){\n      console.log(content);\n\n      //adjust button render states\n      if (pageNum > 1 && backButton.hasClass('inactive')){\n        backButton.removeClass('inactive');\n      }else if (!backButton.hasClass('inactive') && pageNum < 2) {\n        backButton.addClass('inactive');\n      }\n      if (pageNum < maxPage && maxPage > 1){\n        nextButton.removeClass('inactive');\n      }else if (!nextButton.hasClass('inactive')){\n        nextButton.addClass('inactive')\n      }\n\n      //select template and add data\n      var templateContent = githubReposTemplate.html();\n      var outputRepos = Mustache.render(templateContent,content);\n      reposList.append(outputRepos);\n\n      //unhide output and navigator\n      reposList.removeClass(\"hidden\");\n\n    }\n\n}());\n"]}