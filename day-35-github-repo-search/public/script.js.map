{"version":3,"sources":["../client/js/script.js"],"names":["$","searchForm","searchRepos","val","searchButton","backButton","nextButton","pageDisplay","pageNum","maxPage","resultsDiv","reposList","githubReposTemplate","auth","btoa","on","evt","console","log","preventDefault","length","searchGithubRepos","keyup","which","reponame","addClass","html","promise","ajax","type","url","data","q","page","dataType","async","headers","done","Math","ceil","total_count","renderPage","fail","alert","content","hasClass","removeClass","templateContent","outputRepos","Mustache","render","append","jQuery"],"mappings":"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","file":"script.js","sourcesContent":["(function($) {\n\n\n    //select inputs\n    var searchForm = $( '.repo-input' );\n    var searchRepos = $( '.repo-input' ).val();\n    var searchButton = $('.search-button');\n\n    //paginate\n    var backButton = $('.back');\n    var nextButton = $('.next');\n    var pageDisplay = $('.page-num');\n    var pageNum = 1;\n    var maxPage;\n\n    //select outputs\n    var resultsDiv = $( '.results' );\n    var reposList = $( \".repos-list\" );\n    var githubReposTemplate = $( \".github-repos-template\" );\n\n    //the cure for a rate limit 403 error?\n    var auth = btoa(\"4d892accbfd6b61cb0118fe2a5ce0baeebe5dad7\");\n\n\n    searchButton.on('click',function(evt)  {\n      console.log('search api called');\n      searchRepos = $( '.repo-input' ).val();\n      // console.log(evt,evt.target);\n      evt.preventDefault();\n      // console.log(searchRepos);\n      pageNum = 1;\n      if(searchRepos.length > 0){\n        searchGithubRepos(searchRepos,pageNum);\n      }\n\n    });\n\n    searchForm.keyup(function(evt){\n      console.log('key pushed');\n      searchRepos = $( '.repo-input' ).val();\n      pageNum = 1;\n      if (evt.which === 13 && searchRepos.length > 0){\n        searchGithubRepos(searchRepos,pageNum);\n      }\n    });\n\n    nextButton.on('click', function(){\n      console.log('page button click');\n      // searchRepos = $( '.repo-input' ).val();\n      if (pageNum < maxPage){\n        pageNum++;\n        searchGithubRepos(searchRepos,pageNum);\n      }else{\n        return;\n      }\n\n    });\n\n    // backButton.click = () => {\n    backButton.on('click', function(){\n      console.log('page button click');\n      // searchRepos = $( '.repo-input' ).val();\n      if (pageNum > 1){\n        pageNum--;\n        searchGithubRepos(searchRepos,pageNum);\n      }else{\n        return;\n      }\n\n    });\n\n\n    //api Call\n    //api.github.com/users/\n    //api.github.com/search/users\n    //api.github.com/search/repos\n\n    function searchGithubRepos(reponame,pageNum){\n      reposList.addClass('hidden');\n      console.log('calling',reponame);\n      console.log(\"clearing output\");\n      reposList.html(\"\");\n\n      var promise = $.ajax({\n        type: 'GET',\n        url: \"https://api.github.com/search/repositories\",\n        data:{q:reponame, page:pageNum},\n        dataType: 'JSON',\n        async:true,\n        headers: {\n         \"Authorization\": \"Basic \" + auth\n       },\n      })\n        .done(function(data){\n        maxPage = Math.ceil(data.total_count/30);\n        //test\n        console.log(\"recieved data, =||= ::\",data);\n        console.log(\"maxpage \",maxPage)\n        // resultsDiv.append(JSON.stringify(data));\n        //button check used to be here\n        if(maxPage > 0){\n          pageDisplay.html(pageNum + \" / \" + maxPage);\n          renderPage(data);\n        }else{\n          // reposList.addClass('hidden');\n          pageDisplay.html(\"No Results\");\n        }\n\n      })\n      .fail(function(){\n        console.log(\"Nothing on GITHUB today\");\n        alert(\"GITHUB NOT DOING IT FOR YOU\") ;\n      });\n\n    }\n\n\n    function renderPage(content){\n      console.log(content);\n\n      //adjust button render states\n      if (pageNum > 1 && backButton.hasClass('inactive')){\n        backButton.removeClass('inactive');\n      }else if (!backButton.hasClass('inactive') && pageNum < 2) {\n        backButton.addClass('inactive');\n      }\n      if (pageNum < maxPage && maxPage > 1){\n        nextButton.removeClass('inactive');\n      }else if (!nextButton.hasClass('inactive')){\n        nextButton.addClass('inactive')\n      }\n\n      //select template and add data\n      var templateContent = githubReposTemplate.html();\n      var outputRepos = Mustache.render(templateContent,content);\n      reposList.append(outputRepos);\n\n      //unhide output and navigator\n      reposList.removeClass(\"hidden\");\n      $('.pages').removeClass(\"hidden\");\n    }\n\n}(jQuery));\n"]}