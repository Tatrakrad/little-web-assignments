{"version":3,"sources":["../client/js/script.js"],"names":["searchForm","searchRepos","val","searchButton","console","log","backButton","nextButton","pageDisplay","pageNum","maxPage","resultsDiv","reposList","githubReposTemplate","auth","btoa","on","evt","preventDefault","length","searchGithubRepos","keyup","which","click","reponame","html","promise","ajax","type","url","data","q","page","dataType","async","headers","done","Math","ceil","total_count","removeClass","renderPage","addClass","fail","alert","content","hasClass","templateContent","outputRepos","Mustache","render","append"],"mappings":"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","file":"script.js","sourcesContent":["import $ from \"jquery\";\r\n\r\n(function() {\r\n\r\n\r\n    //select inputs\r\n    var searchForm = $( '.repo-input' );\r\n    var searchRepos = $( '.repo-input' ).val();\r\n    var searchButton = $('.search-button');\r\n\r\n    console.log(searchForm);\r\n    console.log(searchRepos);\r\n    console.log(searchButton);\r\n\r\n    //paginate\r\n    var backButton = $('.back');\r\n    var nextButton = $('.next');\r\n    var pageDisplay = $('.page-num');\r\n    var pageNum = 1;\r\n    var maxPage;\r\n\r\n    //select outputs\r\n    var resultsDiv = $( '.results' );\r\n    var reposList = $( \".repos-list\" );\r\n    var githubReposTemplate = $( \".github-repos-template\" );\r\n\r\n    //the cure for a rate limit 403 error?\r\n    var auth = btoa(\"4d892accbfd6b61cb0118fe2a5ce0baeebe5dad7\");\r\n\r\n\r\n    searchButton.on('click',function(evt) {\r\n      console.log('u clicked');\r\n      searchRepos = $( '.repo-input' ).val();\r\n      // console.log(evt,evt.target);\r\n      evt.preventDefault();\r\n      // console.log(searchRepos);\r\n      pageNum = 1;\r\n      if(searchRepos.length > 0){\r\n        searchGithubRepos(searchRepos,pageNum);\r\n      }\r\n\r\n    });\r\n\r\n    searchForm.keyup = (evt) => {\r\n      console.log('u hit enter?');\r\n      searchRepos = $( '.repo-input' ).val();\r\n      pageNum = 1;\r\n      if (evt.which === 13 && searchRepos.length > 0){\r\n        searchGithubRepos(searchRepos,pageNum);\r\n      }\r\n    };\r\n\r\n    nextButton.click = () => {\r\n      // searchRepos = $( '.repo-input' ).val();\r\n      if (pageNum < maxPage){\r\n        pageNum++;\r\n        searchGithubRepos(searchRepos,pageNum);\r\n      }else{\r\n        return;\r\n      }\r\n\r\n    };\r\n\r\n    backButton.click = () => {\r\n      // searchRepos = $( '.repo-input' ).val();\r\n      if (pageNum > 1){\r\n        pageNum--;\r\n        searchGithubRepos(searchRepos,pageNum);\r\n      }else{\r\n        return;\r\n      }\r\n\r\n    };\r\n\r\n\r\n    //api Call\r\n    //api.github.com/users/\r\n    //api.github.com/search/users\r\n    //api.github.com/search/repos\r\n\r\n    function searchGithubRepos(reponame,pageNum){\r\n\r\n      console.log(reponame);\r\n      console.log(\"clearing output\");\r\n      reposList.html(\"\");\r\n\r\n      var promise = $.ajax({\r\n        type: 'GET',\r\n        url: \"https://api.github.com/search/repositories\",\r\n        data:{q:reponame, page:pageNum},\r\n        dataType: 'JSON',\r\n        async:true,\r\n        headers: {\r\n         \"Authorization\": \"Basic \" + auth\r\n       },\r\n      });\r\n\r\n      promise.done = (data) => {\r\n        maxPage = Math.ceil(data.total_count/30);\r\n        $('.pages').removeClass(\"hidden\");\r\n        //test\r\n        console.log(\"recieved data, =||= ::\",data);\r\n        console.log(\"maxpage \",maxPage)\r\n        // resultsDiv.append(JSON.stringify(data));\r\n        //button check used to be here\r\n        if(maxPage > 0){\r\n          pageDisplay.html(pageNum + \" / \" + maxPage);\r\n          renderPage(data);\r\n        }else{\r\n          reposList.addClass('hidden');\r\n          pageDisplay.html(\"No Results\");\r\n        }\r\n\r\n      };\r\n\r\n      promise.fail = () =>{\r\n        console.log(\"Nothing on GITHUB today\");\r\n        alert(\"GITHUB NOT DOING IT FOR YOU\") ;\r\n      };\r\n\r\n    }\r\n\r\n\r\n    function renderPage(content){\r\n      console.log(content);\r\n\r\n      //adjust button render states\r\n      if (pageNum > 1 && backButton.hasClass('inactive')){\r\n        backButton.removeClass('inactive');\r\n      }else if (!backButton.hasClass('inactive') && pageNum < 2) {\r\n        backButton.addClass('inactive');\r\n      }\r\n      if (pageNum < maxPage && maxPage > 1){\r\n        nextButton.removeClass('inactive');\r\n      }else if (!nextButton.hasClass('inactive')){\r\n        nextButton.addClass('inactive')\r\n      }\r\n\r\n      //select template and add data\r\n      var templateContent = githubReposTemplate.html();\r\n      var outputRepos = Mustache.render(templateContent,content);\r\n      reposList.append(outputRepos);\r\n\r\n      //unhide output and navigator\r\n      reposList.removeClass(\"hidden\");\r\n\r\n    }\r\n\r\n}());\r\n"]}