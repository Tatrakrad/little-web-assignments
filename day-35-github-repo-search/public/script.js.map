{"version":3,"sources":["../client/js/script.js"],"names":["$","searchForm","searchRepos","val","searchButton","backButton","nextButton","pageDisplay","pageNum","maxPage","resultsDiv","reposList","githubReposTemplate","auth","btoa","on","evt","console","log","preventDefault","length","searchGithubRepos","onkeyup","which","reponame","html","promise","ajax","type","url","data","q","page","dataType","async","headers","done","Math","ceil","total_count","removeClass","renderPage","addClass","fail","alert","content","hasClass","templateContent","outputRepos","Mustache","render","append","jQuery"],"mappings":"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","file":"script.js","sourcesContent":["(function($) {\n\n\n    //select inputs\n    var searchForm = $( '.repo-input' );\n    var searchRepos = $( '.repo-input' ).val();\n    var searchButton = $('.search-button');\n\n    //paginate\n    var backButton = $('.back');\n    var nextButton = $('.next');\n    var pageDisplay = $('.page-num');\n    var pageNum = 1;\n    var maxPage;\n\n    //select outputs\n    var resultsDiv = $( '.results' );\n    var reposList = $( \".repos-list\" );\n    var githubReposTemplate = $( \".github-repos-template\" );\n\n    //the cure for a rate limit 403 error?\n    var auth = btoa(\"4d892accbfd6b61cb0118fe2a5ce0baeebe5dad7\");\n\n\n    searchButton.on('click',function(evt)  {\n      console.log('search api called');\n      searchRepos = $( '.repo-input' ).val();\n      // console.log(evt,evt.target);\n      evt.preventDefault();\n      // console.log(searchRepos);\n      pageNum = 1;\n      if(searchRepos.length > 0){\n        searchGithubRepos(searchRepos,pageNum);\n      }\n\n    });\n\n    searchForm.onkeyup = (evt) => {\n      console.log('search api called');\n      searchRepos = $( '.repo-input' ).val();\n      pageNum = 1;\n      if (evt.which === 13 && searchRepos.length > 0){\n        searchGithubRepos(searchRepos,pageNum);\n      }\n    };\n\n    nextButton.on('click', function(){\n      console.log('page button click');\n      // searchRepos = $( '.repo-input' ).val();\n      if (pageNum < maxPage){\n        pageNum++;\n        searchGithubRepos(searchRepos,pageNum);\n      }else{\n        return;\n      }\n\n    });\n\n    // backButton.click = () => {\n    backButton.on('click', function(){\n      console.log('page button click');\n      // searchRepos = $( '.repo-input' ).val();\n      if (pageNum > 1){\n        pageNum--;\n        searchGithubRepos(searchRepos,pageNum);\n      }else{\n        return;\n      }\n\n    });\n\n\n    //api Call\n    //api.github.com/users/\n    //api.github.com/search/users\n    //api.github.com/search/repos\n\n    function searchGithubRepos(reponame,pageNum){\n\n      console.log(reponame);\n      console.log(\"clearing output\");\n      reposList.html(\"\");\n\n      var promise = $.ajax({\n        type: 'GET',\n        url: \"https://api.github.com/search/repositories\",\n        data:{q:reponame, page:pageNum},\n        dataType: 'JSON',\n        async:true,\n        headers: {\n         \"Authorization\": \"Basic \" + auth\n       },\n      })\n        .done(function(data){\n        maxPage = Math.ceil(data.total_count/30);\n        $('.pages').removeClass(\"hidden\");\n        //test\n        console.log(\"recieved data, =||= ::\",data);\n        console.log(\"maxpage \",maxPage)\n        // resultsDiv.append(JSON.stringify(data));\n        //button check used to be here\n        if(maxPage > 0){\n          pageDisplay.html(pageNum + \" / \" + maxPage);\n          renderPage(data);\n        }else{\n          reposList.addClass('hidden');\n          pageDisplay.html(\"No Results\");\n        }\n\n      })\n      .fail(function(){\n        console.log(\"Nothing on GITHUB today\");\n        alert(\"GITHUB NOT DOING IT FOR YOU\") ;\n      });\n\n    }\n\n\n    function renderPage(content){\n      console.log(content);\n\n      //adjust button render states\n      if (pageNum > 1 && backButton.hasClass('inactive')){\n        backButton.removeClass('inactive');\n      }else if (!backButton.hasClass('inactive') && pageNum < 2) {\n        backButton.addClass('inactive');\n      }\n      if (pageNum < maxPage && maxPage > 1){\n        nextButton.removeClass('inactive');\n      }else if (!nextButton.hasClass('inactive')){\n        nextButton.addClass('inactive')\n      }\n\n      //select template and add data\n      var templateContent = githubReposTemplate.html();\n      var outputRepos = Mustache.render(templateContent,content);\n      reposList.append(outputRepos);\n\n      //unhide output and navigator\n      reposList.removeClass(\"hidden\");\n\n    }\n\n}(jQuery));\n"]}